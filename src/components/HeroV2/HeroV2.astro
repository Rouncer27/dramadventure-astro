---
import { Image } from "astro:assets";
import Headline from "../shared/Headline.astro";
import Wrapper from "../shared/Wrapper.astro";

const { data } = Astro.props;
---

<div class="herov2">
  <Wrapper wrapType="med">
    <div class="herov2-title">
      <Headline modifier="herov2-title-element" hlstyle="one" ele="h1"
        >{data.title}</Headline
      >
    </div>
    <div class="herov2-image">
      <div class="herov2-image-wrap">
        <Image
          src={data.heroImage.sourceUrl}
          alt=""
          width="2500"
          height="2500"
        />
      </div>
    </div>
  </Wrapper>
</div>

<style lang="scss">
  @use "../../style/abstracts";

  .herov2 {
    position: relative;
    width: 100%;
    padding-top: 15rem;
    background-color: abstracts.$creamColor;

    &-title {
      position: relative;
      width: 100%;

      &::before {
        position: absolute;
        top: 4rem;
        right: 2rem;
        left: 2rem;
        height: 0.2rem;
        background-color: abstracts.$secondaryColor;
        content: "";
      }
    }

    &-image {
      position: relative;
      width: 100%;
      height: 55.6rem;
      border-left: 0.2rem solid abstracts.$secondaryColor;

      &-wrap {
        position: absolute;
        height: 100%;
        top: 0;
        right: 4rem;
        left: 4rem;
      }

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }
  }
</style>

<style is:global lang="scss">
  @use "../../style/abstracts";

  .herov2-title-element {
    position: relative;
    width: 18rem;
    margin-bottom: 2rem;
    text-transform: uppercase;
    background-color: abstracts.$creamColor;
    z-index: 10;
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  const tigger = document.querySelector(".herov2");
  const quote = document.querySelector(".herov2-title h2");

  console.log("HELLO HEROV2 THERE!");

  gsap
    .timeline({
      scrollTrigger: {
        trigger: tigger,
        markers: false,
        start: "top 40%",
        scrub: false,
      },
    })
    .fromTo(
      quote,
      { autoAlpha: 0, x: 100 },
      { autoAlpha: 1, ease: "power2.out", duration: 1.5, x: 0 },
    );
</script>
